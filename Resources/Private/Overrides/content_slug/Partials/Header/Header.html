<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<f:comment>
<!--
    This is a copy from EXT:content_slug (which in turn extends EXT:fluid_styled_content).

    Adjustments for URL fragment rendering:
    1. The first condition will check if the custom fragment field is filled.
       In this case, we'll use this fragment, combined with the content element's uid.
       Otherwise, only the uid is used (with a different prefix).
       This ensures the compatibility with the new 'SEO Table of contents' menu,
       as well as with the default 'Section Index' combined with EXT:content_slug.
    2. Added an id attribute with the fragment variable to all headings.
    2. Added a link with the current fragment to the heading (if activated in content element).
    3. Added the variables once more to the arguments for the defaultCase.
       This is important for all content elements with the 'default' header layout!
-->
</f:comment>

<f:if condition="{fragmentIdentifier}">
    <f:then>
        <f:variable name="fragment" value="c{uid}-{fragmentIdentifier}" />
    </f:then>
    <f:else>
        <f:variable name="fragment" value="ce{uid}" />
    </f:else>
</f:if>

<f:if condition="{header}">
    <f:switch expression="{layout}">
        <f:case value="1">
            <h1 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h1>
        </f:case>
        <f:case value="2">
            <h2 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h2>
        </f:case>
        <f:case value="3">
            <h3 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h3>
        </f:case>
        <f:case value="4">
            <h4 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h4>
        </f:case>
        <f:case value="5">
            <h5 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h5>
        </f:case>
        <f:case value="6">
            <h6 id="{fragment}" class="{positionClass}">
                <f:link.typolink parameter="{link}">{header}</f:link.typolink>
                <f:if condition="{renderAnchorLink}"><a class="headline-anchor" href="#{fragment}">#</a></f:if>
            </h6>
        </f:case>
        <f:case value="100">
            <f:comment> -- do not show header --</f:comment>
        </f:case>
        <f:defaultCase>
            <f:if condition="{default}">
                <f:render partial="Header/Header" arguments="{
                    header: header,
                    layout: default,
                    positionClass: positionClass,
                    uid: uid,
                    fragmentIdentifier: fragmentIdentifier,
                    renderAnchorLink: renderAnchorLink,
                    link: link}"/>
            </f:if>
        </f:defaultCase>
    </f:switch>
</f:if>
</html>
